version: '3.8'

services:
  https-portal:
    build: .
    container_name: DAppNodePackage-https-portal.dnp.dappnode.eth
    ports:
      - '80:80'
      - '443:443'
    environment: 
      STAGE: 'dappnode-api'
      CERTAPI_URL: 'cert-api:5000'
      PUBLIC_DOMAIN: 'xxxxx.dyndns.dappnode.io'
    volumes:
      - "portal-certs:/var/lib/https-portal/"
      - "portal-data:/var/run/domains.d/"
    networks: 
      - dncore_network
      - dappnode_public
       
networks: 
  dappnode_public:
    external: true
  dncore_network:
    external: true

volumes: 
  portal-certs:
  portal-data:
